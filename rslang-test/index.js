(()=>{"use strict";const t={group1:"Группа 1",group2:"Группа 2",group3:"Группа 3",group4:"Группа 4",group5:"Группа 5",group6:"Группа 6",group7:"Сложные слова"},n="isDiff",e="wasStudied",s={difficultBtn:["btn-danger","text-light"],studyBtns:["btn-success","text-light"]},o="diff",i={textbookPage:0,textbookGroup:0,startedFromBook:!1},a={render:async()=>'\n            <section class="section home">\n              <h1>RSLang</h1>\n              <p class="home-text">Это приложение для изучения английского языка и увеличения словарного запаса в игровой форме!</p>\n              <h2>Возможности и преимущества нашего приложения</h2>\n              <div class="row row-cols-1 row-cols-md-2 g-4 benefits-inner">\n                \n    <div class="col">\n      <div class="card shadow-sm h-100">\n        <img src="./assets/games.jpg" alt="games">\n        <div class="card-body">\n          <h4 class="card-title">Игры</h4>\n          <p class="card-text">Вам доступны две увлекателельные игры для изучения и повторения слов.</p>\n        </div>\n      </div>\n    </div>\n    <div class="col">\n      <div class="card shadow-sm h-100">\n        <img src="./assets/book.jpg" alt="games">\n        <div class="card-body">\n          <h4 class="card-title">Учебник</h4>\n          <p class="card-text">Всем пользователям доступен набор слов, которые сипользуются в мини играх. У авторизированных пользователей есть возможность видеть свой прогресс, изучения конкретного слова прямо на странице учебника. Также вы можете самостоятельно помечать сложные и изученные слова.</p>\n        </div>\n      </div>\n    </div>\n    <div class="col">\n      <div class="card shadow-sm h-100">\n        <img src="./assets/stats.jpg" alt="games">\n        <div class="card-body">\n          <h4 class="card-title">Статистика</h4>\n          <p class="card-text">Авторизованные пользователи могут просматривать статистику за текущий день.</p>\n        </div>\n      </div>\n    </div>\n    <div class="col">\n      <div class="card shadow-sm h-100">\n        <img src="./assets/team.jpg" alt="games">\n        <div class="card-body">\n          <h4 class="card-title">Команда</h4>\n          <p class="card-text">Ну а куда без нас?!</p>\n          <a href="/#/team">Наша команда тут!</a>\n        </div>\n      </div>\n    </div>\n\n              </div>\n            </section>\n        ',after_render:async()=>{i.startedFromBook=!1}},r={render:async()=>'\n            <section class="section">\n                <h1> 404 Error </h1>\n            </section>\n        ',after_render:async()=>{i.startedFromBook=!1}},c="https://rslang1.herokuapp.com",l=`${c}/users`,d='\n  <div class="alert alert-danger d-none" role="alert" id="alert"></div>\n',h='\n  <div class="mb-3">\n    <label for="email" class="form-label">Email address</label>\n    <input type="email" class="form-control" id="email" required>\n  </div>\n',u='\n  <div class="mb-3">\n    <label for="password" class="form-label">Password</label>\n    <input type="password" class="form-control" id="password" minlength = "3" maxlength="20" required>\n  </div>\n',p=t=>`\n  <button type="submit" class="btn btn-primary" id="submit">${t}</button>\n`,w=(t,n)=>`\n  <a href="#/${t}" class="link-primary d-block mt-3 mb-5">${n}</a>\n`,m={render:async()=>`\n            <section class="section">\n              <h1>Pегистрация</h1>\n              ${d}\n              <form id="form">\n                \n<div class="mb-3">\n    <label for="name" class="form-label">User name</label>\n    <input type="text" class="form-control" id="name" required>\n</div>\n\n                ${h}\n                ${u}\n                ${p("Sign Up")}\n                ${w("login","Do you have an account? Sign In")}\n              </form>\n            </section>\n          `,after_render:async()=>{i.startedFromBook=!1;const t=document.getElementById("name"),n=document.getElementById("email"),e=document.getElementById("password"),s=document.getElementById("submit"),o=document.getElementById("alert");document.getElementById("form").onsubmit=()=>!1,s.onclick=async()=>{if(t.validity.valid&&n.validity.valid&&e.validity.valid){const s={name:t.value,email:n.value,password:e.value},i=await(async t=>{const n=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return n.ok?"Success":417===n.status?"User already exist":422===n.status?"Incorrect e-mail or password":n.statusText})(s);"Success"===i?location.hash="/login":(o.innerText=i,o.classList.remove("d-none"))}}}},g=`${c}/signin`;let b;const v=async()=>'\n      <nav class="p-3 bg-dark text-white">\n        <div class="container">\n          <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">\n            <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0 menu">\n              <li><a href="/#" class="nav-link px-2 text-secondary home-link">\n<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house" viewBox="0 0 16 16">\n<path fill-rule="evenodd" d="M2 13.5V7h1v6.5a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5V7h1v6.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5zm11-11V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z"/>\n<path fill-rule="evenodd" d="M7.293 1.5a1 1 0 0 1 1.414 0l6.647 6.646a.5.5 0 0 1-.708.708L8 2.207 1.354 8.854a.5.5 0 1 1-.708-.708L7.293 1.5z"/>\n</svg>\n</a></li>\n              <li><a href="/#/textbook" class="nav-link px-2 text-white textbook-link">Учебник</a></li>\n              <li><a href="/#/audiocall" class="nav-link px-2 text-white audiocall-link">Аудиовызов</a></li>\n              <li><a href="/#/sprint" class="nav-link px-2 text-white sprint-link">Спринт</a></li>\n              <li><a href="/#/stats" class="nav-link px-2 text-white">Статистика</a></li>\n            </ul>\n            <div class="text-end">\n              <a  class="btn btn-outline-light me-2" href="/#/login" id="login-state"></a>\n            </div>\n          </div>\n        </div>\n      </nav>\n    ',y=async()=>{b=document.getElementById("login-state"),b&&(b.innerText=$.isAuthenticated?"Logout":"Login")},f=()=>{b&&(b.innerText="Login")},x=()=>{b&&(b.innerText="Logout")},k=async t=>{const n=await fetch(`${c}/users/${t.userId}/statistics`,{method:"GET",headers:{Authorization:`Bearer ${t.token}`}});if(n.ok){const t=await n.json();return console.log(t),{learnedWords:t.learnedWords,optional:t.optional}}return 401===n.status?{message:"Ошибка авторизации"}:404===n.status?{message:"Статистика для текущего пользователя отсутствует"}:{message:n.statusText}},A=async(t,n)=>{const e=await fetch(`${c}/users/${t.userId}/statistics`,{method:"PUT",headers:{Authorization:`Bearer ${t.token}`,"Content-Type":"application/json"},body:JSON.stringify(n)});return e.ok?await e.json():400===e.status?{message:"Некорректный запрос"}:401===e.status?{message:"Ошибка авторизации"}:e.statusText},$={isAuthenticated:!1,userId:"",token:""},L={render:async()=>`\n            <section class="section">\n              <h1>Авторизация</h1>\n              ${d}\n              <form id="form">\n                ${h}\n                ${u}\n                ${p("Sign In")}\n                ${w("register","Don`t have an account? Sign Up")}\n              </form>\n            </section>\n          `,after_render:async()=>{i.startedFromBook=!1;const t=document.getElementById("email"),n=document.getElementById("password"),e=document.getElementById("submit"),s=document.getElementById("alert");document.getElementById("form").onsubmit=()=>!1,$.isAuthenticated&&(localStorage.removeItem("authResults"),$.isAuthenticated=!1,f()),e.onclick=async()=>{if(t.validity.valid&&n.validity.valid){const e={email:t.value,password:n.value},o=await(async t=>{const n=await fetch(g,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return n.ok?await n.json():403===n.status?{message:"Incorrect e-mail or password"}:{message:n.statusText}})(e);"Authenticated"===o.message?(localStorage.setItem("authResults",JSON.stringify(o)),$.token=o.token,$.userId=o.userId,$.isAuthenticated=!0,x(),"Статистика для текущего пользователя отсутствует"===(await k($)).message&&await(async t=>{A(t,{learnedWords:0,optional:{sprintShortStat:{newWords:0,rightWords:0,wrongWords:0,longestSeries:0,lastUpdate:""},audioCallShortStat:{newWords:0,rightWords:0,wrongWords:0,longestSeries:0,lastUpdate:""},wordShortStat:{newWords:0,rightWords:0,wrongWords:0,learnedWords:0,lastUpdate:""}}})})($),location.hash=Lt.previousRoute):(s.innerText=o.message,s.classList.remove("d-none"))}}}};function S(t,n,e,...s){const o=document.createElement(n);return o.classList.add(...s),e&&(o.innerText=e),t&&t.appendChild(o),o}const I=`${c}/words`,T=async(t,n)=>{const e=await fetch(`${I}?group=${t}&page=${n}`);return await e.json()};function C(t,n,e,s){e-n<=t&&(e=n+t);const o=new Set;for(void 0!==s&&o.add(s);o.size!==t;)o.add(Math.floor(Math.random()*e)+n);const i=[...o];if(void 0!==s){const t=Math.floor(Math.random()*i.length);i[0]=i[t],i[t]=s}return i}const M=async t=>{const n=await fetch(`${c}/users/${t}/aggregatedWords?wordsPerPage=3600&filter={"$and":[{"userWord.difficulty":"word", "userWord.optional.isDiff":true}]}`,{method:"GET",headers:{Authorization:`Bearer ${$.token}`,Accept:"application/json"}});return await n.json()},_=async(t,n,e)=>{const s=`{"$and":[{"group": ${n}}, {"page": ${e}}, {"userWord.optional.wasStudied":false}]}`,o=`{"$and":[{"group": ${n}}, {"page": ${e}}, {"userWord":null}]}`,i=async n=>{const e=await fetch(`${c}/users/${t}/aggregatedWords?wordsPerPage=20&filter=${n}`,{method:"GET",headers:{Authorization:`Bearer ${$.token}`,Accept:"application/json"}});return(await e.json())[0].paginatedResults};return[...await i(s),...await i(o)]};class E{constructor(t){this.parent=t,t.container.innerHTML="",t.totalPoints=0,S(t.container,"h1","Аудиовызов","text-center"),S(t.container,"h6","Выберите из предложенных вариантов ответа правильный перевод слова, который услышите","text-center"),S(t.container,"p","Используйте мышь или клавиши от 1 до 5 для выбора ответа"),S(t.container,"p","Клавишу пробел для проигрывания слова"),S(t.container,"p","Клавишу Enter для перехода к следующему слову"),(t=>{const n=S(t,"div");return S(n,"label","Уровень сложности","mb-1"),S(n,"select","","form-select","mb-3").innerHTML='\n    <option value="0">1</option>\n    <option value="1">2</option>\n    <option value="2">3</option>\n    <option value="3">4</option>\n    <option value="4">5</option>\n    <option value="5">6</option>\n  ',n})(t.container).onchange=n=>{t.level=Number(n.target.value)};const n=S(t.container,"button","Старт","btn","btn-primary");this.onMain=()=>null,n.onclick=async()=>{n.disabled=!0,n.innerText="Загрузка...  ",S(n,"span","","spinner-border","spinner-border-sm"),await this.createWordList(),this.onMain()}}async createWordList(){const t=this.parent.startedFromBook&&$.isAuthenticated?await _($.userId,i.textbookGroup,i.textbookPage):await T(this.parent.level,Math.round(29*Math.random()));this.parent.wordList=t.map(((n,e)=>Object.assign(Object.assign({},n),{testAnswerList:C(5,0,t.length,e).map((n=>t[n].wordTranslate))})))}}class B{constructor(t,n){this.timeView=S(t,"h5",`Время: ${n}`,"text-center"),this.duration=n,this.onTime=()=>{}}start(){let t=this.duration;const n=()=>{if(t>0&&(t-=1,this.timeView))return this.timeView.innerText="Время: "+t.toString(),void setTimeout(n,1e3);this.onTime()};setTimeout(n,1e3)}destroy(){this.timeView=void 0,this.onTime=()=>{}}}const W='\n  <svg  viewBox="0 0 476 407" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path d="M200.999 29.952C196.053 29.952 191.77 31.764 188.152 35.378L93.078 130.453H18.276C13.324 130.453 9.042 132.265 5.426 135.877C1.809 139.493 0 143.778 0 148.726V258.356C0 263.305 1.809 267.589 5.426 271.204C9.045 274.821 13.328 276.631 18.276 276.631H93.074L188.148 371.709C191.765 375.319 196.048 377.133 200.995 377.133C205.947 377.133 210.229 375.32 213.845 371.709C217.462 368.095 219.271 363.808 219.271 358.862V48.228C219.271 43.28 217.462 38.994 213.849 35.378C210.23 31.764 205.951 29.952 200.999 29.952Z" fill="black"/>\n  <path d="M316.769 243.936C324.862 231.469 328.904 218.006 328.904 203.541C328.904 189.076 324.862 175.549 316.769 162.985C308.675 150.423 297.978 141.575 284.648 136.434C282.746 135.485 280.364 135.007 277.509 135.007C272.565 135.007 268.277 136.769 264.662 140.289C261.052 143.81 259.235 148.141 259.235 153.279C259.235 157.276 260.378 160.655 262.667 163.416C264.95 166.178 267.708 168.558 270.949 170.555C274.179 172.553 277.417 174.743 280.657 177.122C283.895 179.502 286.653 182.88 288.935 187.257C291.211 191.637 292.361 197.061 292.361 203.534C292.361 210.005 291.218 215.43 288.935 219.81C286.653 224.191 283.895 227.565 280.657 229.95C277.417 232.329 274.179 234.519 270.949 236.517C267.708 238.509 264.95 240.894 262.667 243.649C260.385 246.414 259.235 249.792 259.235 253.789C259.235 258.933 261.051 263.259 264.662 266.779C268.276 270.3 272.564 272.067 277.509 272.067C280.363 272.067 282.745 271.588 284.648 270.643C297.978 265.304 308.679 256.403 316.769 243.936Z" fill="black"/>\n  <path d="M377.728 284.194C393.908 259.548 402.001 232.663 402.001 203.54C402.001 174.416 393.907 147.535 377.728 122.874C361.551 98.229 340.128 80.291 313.487 69.059C311.016 68.109 308.539 67.632 306.071 67.632C301.123 67.632 296.835 69.441 293.217 73.058C289.604 76.674 287.793 80.956 287.793 85.905C287.793 93.329 291.506 98.944 298.932 102.754C309.589 108.272 316.82 112.459 320.625 115.313C334.714 125.593 345.702 138.486 353.601 153.999C361.499 169.513 365.449 186.025 365.449 203.536C365.449 221.048 361.5 237.559 353.601 253.072C345.703 268.588 334.707 281.479 320.625 291.756C316.819 294.613 309.589 298.799 298.932 304.319C291.506 308.128 287.793 313.743 287.793 321.166C287.793 326.114 289.604 330.402 293.217 334.013C296.834 337.634 301.208 339.445 306.348 339.445C308.634 339.445 311.016 338.962 313.487 338.017C340.128 326.783 361.551 308.844 377.728 284.194Z" fill="black"/>\n  <path d="M438.824 82.92C414.653 46.282 382.481 19.298 342.319 1.97701C339.848 1.02701 337.371 0.552002 334.903 0.552002C329.955 0.552002 325.667 2.36301 322.056 5.97601C318.435 9.59101 316.624 13.878 316.624 18.826C316.624 25.677 320.338 31.295 327.764 35.672C329.099 36.428 331.231 37.427 334.184 38.668C337.134 39.9 339.273 40.899 340.611 41.661C349.365 46.416 357.171 51.272 364.029 56.221C387.436 73.539 405.711 95.143 418.845 121.03C431.979 146.915 438.542 174.418 438.542 203.542C438.542 232.671 431.979 260.168 418.845 286.054C405.714 311.943 387.436 333.55 364.029 350.863C357.171 355.811 349.365 360.664 340.611 365.425C339.273 366.181 337.134 367.177 334.184 368.415C331.231 369.647 329.099 370.646 327.764 371.413C320.338 375.787 316.624 381.406 316.624 388.257C316.624 393.206 318.435 397.49 322.056 401.105C325.666 404.722 329.954 406.532 334.903 406.532C337.371 406.532 339.848 406.056 342.319 405.101C382.481 387.786 414.653 360.801 438.824 324.161C462.998 287.523 475.082 247.312 475.082 203.536C475.082 159.76 463.001 119.554 438.824 82.92Z" fill="black"/>\n  </svg>\n',P=async t=>{const n=await fetch(`${c}/users/${t.id}/words/${t.wordId}`,{method:"POST",headers:{Authorization:`Bearer ${$.token}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t.word)});return 417===n.status?await G(t):await n.json()},G=async t=>{if(!t.word.optional.isDiff&&!t.word.optional.wasStudied&&0===t.word.optional.rightAnswers&&0===t.word.optional.wrongAnswers)return void await V(t.id,t.wordId);const n=await fetch(`${c}/users/${t.id}/words/${t.wordId}`,{method:"PUT",headers:{Authorization:`Bearer ${$.token}`,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t.word)});return await n.json()},H=async t=>{const n=await fetch(`${c}/users/${t}/words`,{method:"GET",headers:{Authorization:`Bearer ${$.token}`,Accept:"application/json"}});return await n.json()},D=async(t,n)=>{const e=await fetch(`${c}/users/${t}/words/${n}`,{method:"GET",headers:{Authorization:`Bearer ${$.token}`,Accept:"application/json"}});return 404===e.status?await P(N(n)):await e.json()},V=async(t,n)=>{if(204===(await fetch(`${c}/users/${t}/words/${n}`,{method:"DELETE",headers:{Authorization:`Bearer ${$.token}`,Accept:"application/json"}})).status)return"DELETED"},j=async()=>{const t=await H($.userId),n=document.querySelectorAll(".card-wrapper"),e=document.querySelectorAll(".nav-link"),s=document.querySelector(".audiocall-link"),o=document.querySelector(".sprint-link");if(O(s),O(o),6===i.textbookGroup)return void z();z();let a=0;n.forEach((n=>{const e=n.id.split("-")[1];t.find((t=>t.wordId===e&&(t.optional.isDiff||t.optional.wasStudied)?a++:""))})),20===a&&(z(!0),F(e,s,o))},z=(t=!1)=>{const n=document.querySelector(".textbook-section"),e=document.querySelector(".page-btn");n.style.backgroundColor=t?"#CCFFCC":"",e.style.backgroundColor=t?"#33CC33":"",e.style.color=t?"#FFFFFF":""},F=(t,n,e)=>{R(n),R(e),t.forEach((t=>{t.classList.contains("disabled")||t.classList.contains("textbook-link")||t.addEventListener("click",(()=>{O(n),O(e)}))}))},R=t=>{t.classList.add("disabled")},O=t=>{t.classList.remove("disabled")},q=async(t,a)=>{const r=t.target,c=r.id.split("-")[1],l=a===n?s.difficultBtn:s.studyBtns,d=a===n?n:e,h=a===n?"std":o,u=document.getElementById(`col-${c}`);if(r.classList.contains("btn-danger"))return void Q(r,u,c,d,l);if(r.classList.contains("btn-success"))return void Q(r,u,c,d,l);r.classList.add(...l);const p=await D($.userId,c),w=N(c,d,!0);w.word.optional.rightAnswers=p.optional.rightAnswers,w.word.optional.wrongAnswers=p.optional.wrongAnswers,w.word.optional.correctAnswersInARow=p.optional.correctAnswersInARow,U(c,h),await P(w),await j(),6===i.textbookGroup&&u.remove()},N=(t,n="",e=!1)=>{const s={id:$.userId,wordId:t,word:{difficulty:"word",optional:{isDiff:!1,wasStudied:!1,rightAnswers:0,wrongAnswers:0,correctAnswersInARow:0}}};return n&&e&&(s.word.optional[`${n}`]=e),s},Q=async(t,n,e,s,o)=>{t.classList.remove(...o);const a=await D($.userId,e),r=N(e,s,!1);r.word.optional.rightAnswers=a.optional.rightAnswers,r.word.optional.wrongAnswers=a.optional.wrongAnswers,await G(r),await j(),6===i.textbookGroup&&n.remove()},U=(t,n)=>{const e=document.getElementById(`${n}-${t}`),i=n===o?s.difficultBtn:s.studyBtns;e.classList.remove(...i)},J=async()=>{const t=document.querySelectorAll(".difficult-btn"),o=document.querySelectorAll(".study-btn"),i=await H($.userId);K(t,i,n,s.difficultBtn),K(o,i,e,s.studyBtns),(t=>{t.forEach((t=>t.addEventListener("click",(t=>{q(t,n)}))))})(t),(t=>{t.forEach((t=>t.addEventListener("click",(t=>{q(t,e)}))))})(o)},K=(t,n,e,s)=>{Array.from(t).forEach((t=>{const o=t.id.split("-")[1];n.find((n=>{n.wordId===o&&n.optional[e]&&t.classList.add(...s)}))}))};async function Z(t){const n=i.startedFromBook?this.parent.wordList[this.currWordIndex]._id:this.parent.wordList[this.currWordIndex].id,e=await D($.userId,n);t?(e.optional.rightAnswers++,e.optional.correctAnswersInARow++):(e.optional.wrongAnswers++,e.optional.correctAnswersInARow=0,e.optional.wasStudied=!1);const s=N(n);s.word.optional=e.optional;const o=Y(s);console.log(o),await G(o)}const Y=t=>(t.word.optional.isDiff&&t.word.optional.correctAnswersInARow>=5?(t.word.optional.isDiff=!1,t.word.optional.wasStudied=!0):!t.word.optional.isDiff&&!t.word.optional.wasStudied&&t.word.optional.correctAnswersInARow>=3&&(t.word.optional.wasStudied=!0),t);class X{constructor(t){this.parent=t,this.blockAnswer=!1,this.currWordIndex=0,this.buttonsAnswer=[],this.wordListLength=t.wordList.length;const n=S(t.container,"div","","audiocall");this.onComplete=()=>{},this.soundWord=new Audio(`${c}/${this.parent.wordList[this.currWordIndex].audio}`),this.soundExample=new Audio(`${c}/${this.parent.wordList[this.currWordIndex].audioExample}`),this.soundMeaning=new Audio(`${c}/${this.parent.wordList[this.currWordIndex].audioMeaning}`);const e=S(n,"div","","row");this.wordsNumber=S(e,"div","","col-md-6"),this.gameScore=S(e,"div","","col-md-6");const s=S(n,"div","","row");this.cardImg=S(s,"div","","col-md-4"),this.cardText=S(s,"div","","col-md-8");const o=S(n,"div","","row");this.playButton=S(o,"span","","btn","audiocall__play","audiocall__play_big"),this.playButton.innerHTML=W,this.playButton.onclick=()=>{this.soundWord.play()},this.rowAnswer=S(n,"div","","audiocall_buttons","text-center");const i=S(n,"div","","audiocall_buttons","text-center");this.buttonDontknow=S(i,"Button","Не знаю","btn","btn-secondary"),this.buttonDontknow.onclick=()=>{this.checkAnswer(0)},this.buttonNext=S(i,"Button","Следующее слово","btn","btn-primary","d-none"),this.buttonNext.onclick=()=>{this.nexWord()},document.onkeydown=t=>{this.keyHandler(t)}}start(){this.currWordIndex<this.wordListLength?(this.blockAnswer=!1,this.wordsNumber.innerHTML=`Слово: ${this.currWordIndex+1}/${this.parent.wordList.length}`,this.gameScore.innerHTML=`Очки: ${this.parent.totalPoints}/100`,this.buttonDontknow.classList.remove("d-none"),this.playButton.classList.remove("d-none"),this.buttonNext.classList.add("d-none"),this.cardImg.innerHTML="",this.cardText.innerHTML="",this.soundExample=new Audio(`${c}/${this.parent.wordList[this.currWordIndex].audioExample}`),this.soundMeaning=new Audio(`${c}/${this.parent.wordList[this.currWordIndex].audioMeaning}`),this.soundWord=new Audio(`${c}/${this.parent.wordList[this.currWordIndex].audio}`),this.soundWord.play(),this.rowAnswer.innerHTML="",this.buttonsAnswer=[],this.parent.wordList[this.currWordIndex].testAnswerList.map(((t,n)=>{this.buttonsAnswer.push(S(this.rowAnswer,"button",`${n+1} - ${t}`,"btn","btn-outline-secondary")),this.buttonsAnswer.map(((t,n)=>t.onclick=()=>{this.checkAnswer(n+1)}))}))):(document.onkeydown=null,this.onComplete())}checkAnswer(t){if(!1===this.blockAnswer){this.blockAnswer=!0;const n=this.parent.wordList[this.currWordIndex],e=n.wordTranslate,s=n.testAnswerList.indexOf(e);0<t&&t<=5&&(t-1===s?(this.parent.totalPoints+=5,this.parent.wordList[this.currWordIndex].userAnswer=!0):(this.buttonsAnswer[t-1].classList.remove("btn-outline-secondary"),this.buttonsAnswer[t-1].classList.add("btn-danger"),this.parent.wordList[this.currWordIndex].userAnswer=!1)),$.isAuthenticated&&Z.call(this,this.parent.wordList[this.currWordIndex].userAnswer),this.buttonsAnswer[s].classList.remove("btn-outline-secondary"),this.buttonsAnswer[s].classList.add("btn-success"),this.buttonsAnswer.map((t=>t.classList.add("disabled"))),this.gameScore.innerHTML=`Score: ${this.parent.totalPoints}/100`,this.playButton.classList.add("d-none"),this.buttonDontknow.classList.add("d-none"),this.buttonNext.classList.remove("d-none"),this.cardImg.innerHTML=`<img src='${c}/${n.image}'>`;const o=S(this.cardText,"p","","audiocall__word"),i=S(o,"span","","btn","audiocall__play");i.innerHTML=W,i.onclick=()=>{this.soundExample.pause(),this.soundMeaning.pause(),this.soundWord.play()},S(o,"span","").innerHTML=`<b>${n.word}</b> ${n.transcription}`;const a=S(this.cardText,"p","","audiocall__text"),r=S(a,"span","","btn","audiocall__play");r.innerHTML=W,r.onclick=()=>{this.soundMeaning.pause(),this.soundExample.currentTime=0,this.soundExample.play()},S(a,"span","").innerHTML=n.textExample,S(this.cardText,"p","","audiocall__text","audiocall__text_ru").innerHTML=n.textExampleTranslate;const l=S(this.cardText,"p","","audiocall__text"),d=S(l,"span","","btn","audiocall__play");d.innerHTML=W,d.onclick=()=>{this.soundExample.pause(),this.soundMeaning.currentTime=0,this.soundMeaning.play()},S(l,"span","").innerHTML=n.textMeaning,S(this.cardText,"p","","audiocall__text","audiocall__text_ru").innerHTML=n.textMeaningTranslate}else 0===t&&!0===this.blockAnswer&&this.nexWord()}nexWord(){this.currWordIndex+=1,this.blockAnswer=!1,this.start()}keyHandler(t){switch(t.code){case"Digit1":this.checkAnswer(1);break;case"Digit2":this.checkAnswer(2);break;case"Digit3":this.checkAnswer(3);break;case"Digit4":this.checkAnswer(4);break;case"Digit5":this.checkAnswer(5);break;case"Space":this.soundWord.play();break;case"Enter":this.checkAnswer(0)}}}class tt{constructor(t){t.container.innerHTML="",this.onFinish=()=>null,this.countDown=new B(t.container,300),this.countDown.onTime=()=>this.onFinish(),this.wordCards=new X(t),this.wordCards.onComplete=()=>{this.countDown.destroy(),this.onFinish()},S(t.container,"button","Finish","btn","btn-primary").onclick=()=>{this.countDown.destroy(),this.onFinish()},this.startGameFlow()}async startGameFlow(){this.countDown.start(),this.wordCards.start()}}class nt{constructor(t){t.container.innerHTML="";const n=t.wordList.filter((t=>t.userAnswer)),e=t.wordList.filter((t=>!t.userAnswer));S(t.container,"h3",`Результат игры: ${t.totalPoints} очков`),this.addWordList(t.container,n,"Знаю:"),this.addWordList(t.container,e,"Не знаю:");const s=S(t.container,"button","Restart","btn","btn-primary","mb-2","me-2");this.onRestart=()=>null,s.onclick=()=>this.onRestart();const o=S(t.container,"button","Back","btn","btn-primary","mb-2");this.onBack=()=>null,o.onclick=()=>this.onBack()}addWordList(t,n,e){S(t,"h5",`${e} ${n.length}`),n.forEach((n=>{const e=S(t,"div",""),s=S(e,"span","","btn");s.innerHTML='\n  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play" viewBox="0 0 16 16">\n    <path d="M10.804 8 5 4.633v6.734L10.804 8zm.792-.696a.802.802 0 0 1 0 1.392l-6.363 3.692C4.713 12.69 4 12.345 4 11.692V4.308c0-.653.713-.998 1.233-.696l6.363 3.692z"/>\n  </svg>\n',s.onclick=()=>{const t=new Audio(`${c}/${n.audio}`);t.oncanplaythrough=()=>t.play()},S(e,"span",` ${n.word} - ${n.wordTranslate}`)}))}}class et{constructor(t,n){this.container=t,this.startedFromBook=n,this.wordList=[],this.level=0,this.totalPoints=0,this.start()}start(){new E(this).onMain=()=>{new tt(this).onFinish=()=>{const t=new nt(this);t.onRestart=()=>{this.start()},t.onBack=()=>{history.back()}}}}}const st={render:async()=>'\n            <section class="section" id="container">\n            </section>\n          ',after_render:async()=>{const t=document.getElementById("container");t&&(new et(t,i.startedFromBook),i.startedFromBook=!1)}};class ot{constructor(t){this.parent=t,t.container.innerHTML="",t.totalPoints=0,S(t.container,"h1","Спринт"),S(t.container,"h6","«Спринт» - это тренировка для повторения заученных слов из вашего словаря."),S(t.container,"p","Используйте мышь или клавиши влево/вправо для выбора"),t.startedFromBook?S(t.container,"div","Игра запущена из учебника. Будут использованы слова с активной страницы.","alert","alert-primary"):(t=>{const n=S(t,"div");return S(n,"label","Уровень сложности","mb-1"),S(n,"select","","form-select","mb-3").innerHTML='\n    <option value="0">1</option>\n    <option value="1">2</option>\n    <option value="2">3</option>\n    <option value="3">4</option>\n    <option value="4">5</option>\n    <option value="5">6</option>\n  ',n})(t.container).onchange=n=>{t.wordsGroup=Number(n.target.value)};const n=S(t.container,"button","Start","btn","btn-primary");this.onMain=()=>null,this.onEmpty=()=>null,n.onclick=async()=>{n.disabled=!0,n.innerText="Loading...  ",S(n,"span","","spinner-border","spinner-border-sm"),await this.createWordList()?this.onMain():this.onEmpty()}}async createWordList(){let t;t=this.parent.startedFromBook?$.isAuthenticated?await _($.userId,this.parent.wordsGroup,this.parent.wordsPage):await T(this.parent.wordsGroup,this.parent.wordsPage):await T(this.parent.wordsGroup,Math.round(29*Math.random()));const n=t.length;return this.parent.wordList=t.map((e=>{if(Math.random()<=.4)return Object.assign(Object.assign({},e),{testedAnswer:e.wordTranslate,isTruePair:!0,userAnswer:!1});const s=t[Math.round(Math.random()*(n-1))].wordTranslate;return Object.assign(Object.assign({},e),{testedAnswer:s,isTruePair:s===e.wordTranslate,userAnswer:s!==e.wordTranslate})})),n}}class it{constructor(t,n){this.timeView=S(t,"h5",`Время: ${n}`),this.duration=n,this.onTime=()=>{}}start(){let t=this.duration;const n=()=>{if(t>0&&(t-=1,this.timeView))return this.timeView.innerText="Время: "+t.toString(),void setTimeout(n,1e3);this.onTime()};setTimeout(n,1e3)}destroy(){this.timeView=void 0,this.onTime=()=>{}}}class at{constructor(t){this.parent=t,this.currWordIndex=0,this.wordListLength=t.wordList.length;const n=S(t.container,"div");this.onComplete=()=>{};const e=S(n,"h5","","mb-4");S(e,"span","Очки: "),this.totalPointsValueElem=S(e,"span","0");const s=S(n,"h6","","mb-2");S(s,"span","Кол-во правильных ответов подряд: "),this.rightAnswerQueueValueElem=S(s,"span","0"),this.rightAnswerQueue=0;const o=S(n,"h6","","mb-3");S(o,"span","Кол-во очков за правильный ответ: "),this.pointsPerAnswer=10,this.pointsPerAnswerValueElem=S(o,"span",`+${this.pointsPerAnswer}`),this.wordOnEng=S(n,"h4"),this.wordOnRus=S(n,"h5"),S(n,"Button","Неверно","btn","btn-danger","me-2","my-3").onclick=()=>{this.checkAnswer(!1)},S(n,"Button","Верно","btn","btn-success","my-3").onclick=()=>{this.checkAnswer(!0)},document.onkeydown=t=>{this.keyHandler(t)}}start(){this.currWordIndex<this.wordListLength?(this.wordOnEng.innerText=this.parent.wordList[this.currWordIndex].word,this.wordOnRus.innerText=this.parent.wordList[this.currWordIndex].testedAnswer):(document.onkeydown=null,this.onComplete())}checkAnswer(t){const n=t===this.parent.wordList[this.currWordIndex].isTruePair;$.isAuthenticated&&Z.call(this,n),n?(this.rightAnswerQueue+=1,this.parent.totalPoints+=this.pointsPerAnswer,this.totalPointsValueElem.innerText=this.parent.totalPoints.toString(),this.rightAnswerQueue>this.parent.rightAnswerQueueMax&&(this.parent.rightAnswerQueueMax=this.rightAnswerQueue)):this.rightAnswerQueue=0,this.rightAnswerQueueValueElem.innerText=this.rightAnswerQueue.toString(),this.pointsPerAnswer=10*2**Math.floor(this.rightAnswerQueue/4),this.pointsPerAnswerValueElem.innerText=`+${this.pointsPerAnswer}`,this.parent.wordList[this.currWordIndex].userAnswer=t,this.currWordIndex+=1,this.start()}keyHandler(t){"ArrowRight"==t.code&&this.checkAnswer(!0),"ArrowLeft"==t.code&&this.checkAnswer(!1)}}class rt{constructor(t){t.container.innerHTML="",this.onFinish=()=>null,S(t.container,"h1","Спринт"),this.countDown=new it(t.container,60),this.countDown.onTime=()=>this.onFinish(),this.wordCards=new at(t),this.wordCards.onComplete=()=>{this.countDown.destroy(),this.onFinish()},S(t.container,"button","Finish","btn","btn-primary").onclick=()=>{this.countDown.destroy(),this.onFinish()},this.startGameFlow()}async startGameFlow(){this.countDown.start(),this.wordCards.start()}}class ct{constructor(t){t.container.innerHTML="",S(t.container,"h1","Спринт");const n=t.wordList.filter((t=>t.userAnswer===t.isTruePair)),e=t.wordList.filter((t=>!(t.userAnswer===t.isTruePair)));t.wordList.length>0?(S(t.container,"h3",`Результат игры: ${t.totalPoints} очков`),this.addWordList(t.container,n,"Знаю:"),this.addWordList(t.container,e,"Не знаю:"),$.isAuthenticated&&this.saveStatistics(n.length,e.length,t.rightAnswerQueueMax)):S(t.container,"div","Слова для запуска игры отсутствуют","alert","alert-primary","mt-5");const s=S(t.container,"button","Restart","btn","btn-primary","mb-2","me-2");this.onRestart=()=>null,s.onclick=()=>this.onRestart();const o=S(t.container,"button","Back","btn","btn-primary","mb-2");this.onBack=()=>null,o.onclick=()=>this.onBack()}addWordList(t,n,e){S(t,"h5",`${e} ${n.length}`),n.forEach((n=>{const e=S(t,"div",""),s=S(e,"span","","btn");s.innerHTML='\n  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play" viewBox="0 0 16 16">\n    <path d="M10.804 8 5 4.633v6.734L10.804 8zm.792-.696a.802.802 0 0 1 0 1.392l-6.363 3.692C4.713 12.69 4 12.345 4 11.692V4.308c0-.653.713-.998 1.233-.696l6.363 3.692z"/>\n  </svg>\n',s.onclick=()=>{const t=new Audio(`${c}/${n.audio}`);t.oncanplaythrough=()=>t.play()},S(e,"span",` ${n.word} - ${n.wordTranslate}`)}))}async saveStatistics(t,n,e){const s=await k($),o=new Date,i=`${o.getFullYear()}.${o.getMonth()}.${o.getDate()}`;if(!s.message){const o=s,a=o.optional.sprintShortStat;a.lastUpdate===i?(a.newWords=0,a.rightWords+=t,a.wrongWords+=n,a.longestSeries=Number(a.longestSeries)>=e?a.longestSeries:e):(a.lastUpdate=i,a.newWords=0,a.rightWords=t,a.wrongWords=n,a.longestSeries=e),await A($,o)}}}class lt{constructor(t,n,e,s){this.container=t,this.startedFromBook=n,this.wordsGroup=e,this.wordsPage=s,this.wordList=[],this.rightAnswerQueueMax=0,this.totalPoints=0,this.start()}start(){const t=new ot(this);t.onMain=()=>{new rt(this).onFinish=()=>{const t=new ct(this);t.onRestart=()=>{this.start()},t.onBack=()=>{history.back()}}},t.onEmpty=()=>{const t=new ct(this);t.onRestart=()=>{this.start()},t.onBack=()=>{history.back()}}}}const dt=async(t,n)=>{const e=await fetch(`${c}/words?group=${t}&page=${n}`);return await Promise.all(await e.json())},ht=async(t,n)=>(6!==t?await dt(t,n):(await M($.userId))[0].paginatedResults).map((t=>ut(t))).join(""),ut=t=>{const n=6!==i.textbookGroup?t.id:t._id,e=`\n    <div id="col-${n}" class="col col-card card-wrapper border-danger card-group">\n      <div class="card shadow-sm h-100">\n        <img src="${c}/${t.image}" alt="image" width="100%" height="240">\n        <div class="card-body">\n          <div class="d-flex justify-content-between align-items-center">\n            <h5 class="card-title">\n              ${t.word}\n              <small class="text-muted">${t.transcription}</small>\n            </h5>\n            <span class="audio" style="cursor: pointer">\n              <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-soundwave" viewBox="0 0 16 16">\n                <path fill-rule="evenodd" d="M8.5 2a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-1 0v-11a.5.5 0 0 1 .5-.5zm-2 2a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zm4 0a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zm-6 1.5A.5.5 0 0 1 5 6v4a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm8 0a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm-10 1A.5.5 0 0 1 3 7v2a.5.5 0 0 1-1 0V7a.5.5 0 0 1 .5-.5zm12 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0V7a.5.5 0 0 1 .5-.5z"/>\n              </svg>\n            </span>\n          </div>\n          <div class="d-flex justify-content-between align-items-center">\n            <strong class="d-inline-block mb-2 text-success">${t.wordTranslate}</strong>\n          </div>\n          <ul class="list-group list-group-flush border-bottom border-primary">\n            <li class="list-group-item">${t.textMeaning}</li>\n            <li class="list-group-item">${t.textMeaningTranslate}</li>\n          </ul>\n          <ul class="list-group list-group-flush">\n            <li class="list-group-item">${t.textExample}</li>\n            <li class="list-group-item">${t.textExampleTranslate}</li>\n          </ul>\n          <div class="card-bottom">\n            <div class="d-flex justify-content-between align-items-center word-progress" style="margin-bottom: 10px;">\n              ${$.isAuthenticated?'\n  <p class="text-warning"><strong>Это слово еще не использовалось в мини-играх!</strong></p>\n':""}\n            </div>\n            <div class="d-flex justify-content-between align-items-center">\n              ${$.isAuthenticated?(t=>`\n  <div class="d-flex justify-content-between">\n    <div class="btn-groupl">\n      <button id="diff-${t}" type="button" class="btn difficult-btn btn-outline-danger">Сложное</button>\n      <button id="std-${t}" type="button" class="btn study-btn btn-outline-success">Изученное</button>\n    </div>\n  </div>\n`)(n):""}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  `;return e},pt=()=>{document.querySelectorAll(".audio").forEach(((t,n)=>t.addEventListener("click",(()=>{wt(n)}))))},wt=async t=>{mt();const n=6!==i.textbookGroup?await dt(i.textbookGroup,i.textbookPage):(await M($.userId))[0].paginatedResults,e=[n[t].audio,n[t].audioMeaning,n[t].audioExample],s=new Audio;i.isPlaying=s;let o=0;s.volume=.1,s.src=`${c}/${e[o]}`,s.addEventListener("ended",(()=>{o++,o!==e.length&&(s.src=`${c}/${e[o]}`,s.play())})),s.play()},mt=()=>i.isPlaying?i.isPlaying.pause():"",gt=async()=>{const t=await H($.userId),n=document.querySelectorAll(".card-group");bt(t,n);const e=document.querySelectorAll(".correct-answers"),s=document.querySelectorAll(".wrong-answers"),o=document.querySelectorAll(".row-answers");vt(t,e,"rightAnswers"),vt(t,s,"wrongAnswers"),vt(t,o,"correctAnswersInARow")},bt=(t,n)=>{n.forEach((n=>{const e=n.id.split("-")[1];t.find((t=>{var s;t.wordId===e&&(t.optional.correctAnswersInARow||t.optional.rightAnswers||t.optional.wrongAnswers)&&(n.querySelector(".word-progress").innerHTML=`\n  <ul class="list-group list-group-horizontal">\n    <li id="true-${s=t.wordId}" class="list-group-item list-group-item-success correct-answers">0</li>\n    <li id="false-${s}" class="list-group-item list-group-item-danger wrong-answers">0</li>\n    <li id="row-${s}" class="list-group-item list-group-item-warning row-answers">0</li>\n  </ul>\n`)}))}))},vt=(t,n,e)=>{Array.from(n).forEach((n=>{const s=n.id.split("-")[1];t.find((t=>{t.wordId===s&&(n.innerText=`${t.optional[e]}`)}))}))},yt=(t,n)=>{29===i.textbookPage&&(t.disabled=!0),i.textbookPage<29&&(t.disabled=!1),i.textbookPage>0&&(n.disabled=!1),0===i.textbookPage&&(n.disabled=!0)},ft='\n  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>\n',xt=async()=>`\n          <div class="footer py-3 bg-light">\n            <div class="container d-flex footer-inner">\n              <ul class="d-flex justify-content-between align-items-center">\n                <li><a href="https://rs.school/js/">\n<svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 552.8 205.3"><style>.st0{fill:#fff}.st1{clip-path:url(#SVGID_2_)}.st2{clip-path:url(#SVGID_4_)}.st3{clip-path:url(#SVGID_6_)}.st4{clip-path:url(#SVGID_8_)}.st5{fill:#fff;stroke:#000;stroke-width:4;stroke-miterlimit:10}.st6{clip-path:url(#SVGID_8_)}.st6,.st7{fill:none;stroke:#000;stroke-width:4;stroke-miterlimit:10}.st8,.st9{clip-path:url(#SVGID_10_)}.st9{fill:none;stroke:#000;stroke-width:4;stroke-miterlimit:10}</style><title>rs_school_js</title><path d="M285.4 68l26.3-1.7c.6 4.3 1.7 7.5 3.5 9.8 2.9 3.6 6.9 5.4 12.2 5.4 3.9 0 7-.9 9.1-2.8 2-1.5 3.2-3.9 3.2-6.4 0-2.4-1.1-4.7-3-6.2-2-1.8-6.7-3.6-14.1-5.2-12.1-2.7-20.8-6.3-25.9-10.9-5.1-4.3-8-10.6-7.8-17.3 0-4.6 1.4-9.2 4-13 3-4.3 7.1-7.7 12-9.6 5.3-2.3 12.7-3.5 22-3.5 11.4 0 20.1 2.1 26.1 6.4 6 4.2 9.6 11 10.7 20.3l-26 1.5c-.7-4-2.1-6.9-4.4-8.8s-5.3-2.8-9.2-2.8c-3.2 0-5.6.7-7.2 2-1.5 1.2-2.5 3-2.4 5 0 1.5.8 2.9 2 3.8 1.3 1.2 4.4 2.3 9.3 3.3 12.1 2.6 20.7 5.2 26 7.9 5.3 2.7 9.1 6 11.4 9.9 2.4 4 3.6 8.6 3.5 13.3 0 5.6-1.6 11.2-4.8 15.9-3.3 4.9-7.9 8.7-13.3 11-5.7 2.5-12.9 3.8-21.5 3.8-15.2 0-25.7-2.9-31.6-8.8S286.1 77 285.4 68zM6.3 97.6V8.2h46.1c8.5 0 15.1.7 19.6 2.2 4.4 1.4 8.3 4.3 10.9 8.2 2.9 4.3 4.3 9.3 4.2 14.5.3 8.8-4.2 17.2-11.9 21.6-3 1.7-6.3 2.9-9.7 3.5 2.5.7 5 1.9 7.2 3.3 1.7 1.4 3.1 3 4.4 4.7 1.5 1.7 2.8 3.6 3.9 5.6l13.4 25.9H63L48.2 70.2c-1.9-3.5-3.5-5.8-5-6.9-2-1.4-4.4-2.1-6.8-2.1H34v36.3H6.3zM34 44.4h11.7c2.5-.2 4.9-.6 7.3-1.2 1.8-.3 3.4-1.3 4.5-2.8 2.7-3.6 2.3-8.7-1-11.8-1.8-1.5-5.3-2.3-10.3-2.3H34v18.1zM0 174.2l26.3-1.7c.6 4.3 1.7 7.5 3.5 9.8 2.8 3.6 6.9 5.5 12.2 5.5 3.9 0 7-.9 9.1-2.8 2-1.6 3.2-3.9 3.2-6.4 0-2.4-1.1-4.7-3-6.2-2-1.8-6.7-3.6-14.2-5.2-12.1-2.7-20.8-6.3-25.9-10.9-5.1-4.3-8-10.6-7.8-17.3 0-4.6 1.4-9.2 4-13 3-4.3 7.1-7.7 12-9.6 5.3-2.3 12.7-3.5 22-3.5 11.4 0 20.1 2.1 26.1 6.4s9.5 11 10.6 20.3l-26 1.5c-.7-4-2.1-6.9-4.4-8.8-2.2-1.9-5.3-2.8-9.2-2.7-3.2 0-5.6.7-7.2 2.1-1.6 1.2-2.5 3-2.4 5 0 1.5.8 2.9 2 3.8 1.3 1.2 4.4 2.3 9.3 3.3 12.1 2.6 20.7 5.2 26 7.9 5.3 2.7 9.1 6 11.4 9.9 2.4 4 3.6 8.6 3.6 13.2 0 5.6-1.7 11.1-4.8 15.8-3.3 4.9-7.9 8.7-13.3 11-5.7 2.5-12.9 3.8-21.5 3.8-15.2 0-25.7-2.9-31.6-8.8-5.9-6-9.2-13.4-10-22.4z"/><path d="M133 167.2l24.2 7.3c-1.3 6.1-4 11.9-7.7 17-3.4 4.5-7.9 8-13 10.3-5.2 2.3-11.8 3.5-19.8 3.5-9.7 0-17.7-1.4-23.8-4.2-6.2-2.8-11.5-7.8-16-14.9-4.5-7.1-6.7-16.2-6.7-27.3 0-14.8 3.9-26.2 11.8-34.1s19-11.9 33.4-11.9c11.3 0 20.1 2.3 26.6 6.8 6.4 4.6 11.2 11.6 14.4 21l-24.4 5.4c-.6-2.1-1.5-4.2-2.7-6-1.5-2.1-3.4-3.7-5.7-4.9-2.3-1.2-4.9-1.7-7.5-1.7-6.3 0-11.1 2.5-14.4 7.6-2.5 3.7-3.8 9.6-3.8 17.6 0 9.9 1.5 16.7 4.5 20.4 3 3.7 7.2 5.5 12.7 5.5 5.3 0 9.3-1.5 12-4.4 2.7-3.1 4.7-7.4 5.9-13zm56.5-52.8h27.6v31.3h30.2v-31.3h27.8v89.4h-27.8v-36.2h-30.2v36.2h-27.6v-89.4z"/><path d="M271.3 159.1c0-14.6 4.1-26 12.2-34.1 8.1-8.1 19.5-12.2 34-12.2 14.9 0 26.3 4 34.4 12S364 144 364 158.4c0 10.5-1.8 19-5.3 25.7-3.4 6.6-8.7 12-15.2 15.6-6.7 3.7-15 5.6-24.9 5.6-10.1 0-18.4-1.6-25-4.8-6.8-3.4-12.4-8.7-16.1-15.2-4.1-7-6.2-15.7-6.2-26.2zm27.6.1c0 9 1.7 15.5 5 19.5 3.3 3.9 7.9 5.9 13.7 5.9 5.9 0 10.5-1.9 13.8-5.8s4.9-10.8 4.9-20.8c0-8.4-1.7-14.6-5.1-18.4-3.4-3.9-8-5.8-13.8-5.8-5.1-.2-10 2-13.4 5.9-3.4 3.9-5.1 10.4-5.1 19.5zm93.4-.1c0-14.6 4.1-26 12.2-34.1 8.1-8.1 19.5-12.2 34-12.2 14.9 0 26.4 4 34.4 12S485 144 485 158.4c0 10.5-1.8 19-5.3 25.7-3.4 6.6-8.7 12-15.2 15.6-6.7 3.7-15 5.6-24.9 5.6-10.1 0-18.4-1.6-25-4.8-6.8-3.4-12.4-8.7-16.1-15.2-4.1-7-6.2-15.7-6.2-26.2zm27.6.1c0 9 1.7 15.5 5 19.5 3.3 3.9 7.9 5.9 13.7 5.9 5.9 0 10.5-1.9 13.8-5.8 3.3-3.9 4.9-10.8 4.9-20.8 0-8.4-1.7-14.6-5.1-18.4-3.4-3.9-8-5.8-13.8-5.8-5.1-.2-10.1 2-13.4 5.9-3.4 3.9-5.1 10.4-5.1 19.5z"/><path d="M482.1 114.4h27.6v67.4h43.1v22H482v-89.4z"/><ellipse transform="rotate(-37.001 420.46 67.88)" class="st0" cx="420.5" cy="67.9" rx="63" ry="51.8"/><defs><ellipse id="SVGID_1_" transform="rotate(-37.001 420.46 67.88)" cx="420.5" cy="67.9" rx="63" ry="51.8"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" overflow="visible"/></clipPath><g class="st1"><path transform="rotate(-37.001 420.82 68.353)" class="st0" d="M330.9-14.2h179.8v165.1H330.9z"/><g id="Layer_2_1_"><defs><path id="SVGID_3_" transform="rotate(-37.001 420.82 68.353)" d="M330.9-14.2h179.8v165.1H330.9z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" overflow="visible"/></clipPath><g id="Layer_1-2" class="st2"><ellipse transform="rotate(-37.001 420.46 67.88)" class="st0" cx="420.5" cy="67.9" rx="63" ry="51.8"/><defs><ellipse id="SVGID_5_" transform="rotate(-37.001 420.46 67.88)" cx="420.5" cy="67.9" rx="63" ry="51.8"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" overflow="visible"/></clipPath><g class="st3"><path transform="rotate(-37 420.799 68.802)" class="st0" d="M357.8 17h125.9v103.7H357.8z"/><defs><path id="SVGID_7_" transform="rotate(-37 420.799 68.802)" d="M357.8 17h125.9v103.7H357.8z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" overflow="visible"/></clipPath><g class="st4"><ellipse transform="rotate(-37.001 420.46 67.88)" class="st5" cx="420.5" cy="67.9" rx="63" ry="51.8"/></g><path transform="rotate(-37 420.799 68.802)" class="st6" d="M357.8 17h125.9v103.7H357.8z"/><ellipse transform="rotate(-37.001 420.46 67.88)" class="st7" cx="420.5" cy="67.9" rx="63" ry="51.8"/><path transform="rotate(-37 420.799 68.802)" class="st0" d="M357.8 17h125.9v103.7H357.8z"/><defs><path id="SVGID_9_" transform="rotate(-37 420.799 68.802)" d="M357.8 17h125.9v103.7H357.8z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" overflow="visible"/></clipPath><g class="st8"><ellipse transform="rotate(-37.001 420.46 67.88)" class="st5" cx="420.5" cy="67.9" rx="63" ry="51.8"/></g><path transform="rotate(-37 420.799 68.802)" class="st9" d="M357.8 17h125.9v103.7H357.8z"/><path transform="rotate(-37.001 420.82 68.353)" class="st7" d="M330.9-14.2h179.8v165.1H330.9z"/></g><ellipse transform="rotate(-37.001 420.46 67.88)" class="st7" cx="420.5" cy="67.9" rx="63" ry="51.8"/><path d="M392.4 61.3l10-7 12.3 17.5c2.1 2.8 3.7 5.8 4.9 9.1.7 2.5.5 5.2-.5 7.6-1.3 3-3.4 5.5-6.2 7.3-3.3 2.3-6.1 3.6-8.5 4-2.3.4-4.7 0-6.9-1-2.4-1.2-4.5-2.9-6.1-5.1l8.6-8c.7 1.1 1.6 2.1 2.6 2.9.7.5 1.5.8 2.4.8.7 0 1.4-.3 1.9-.7 1-.6 1.7-1.8 1.6-3-.3-1.7-1-3.4-2.1-4.7l-14-19.7zm30 11.1l9.1-7.2c1 1.2 2.3 2.1 3.7 2.6 2 .6 4.1.2 5.8-1.1 1.2-.8 2.2-1.9 2.6-3.3.6-1.8-.4-3.8-2.2-4.4-.3-.1-.6-.2-.9-.2-1.2-.1-3.3.4-6.4 1.7-5.1 2.1-9.1 2.9-12.1 2.6-2.9-.3-5.6-1.8-7.2-4.3-1.2-1.7-1.8-3.7-1.9-5.7 0-2.3.6-4.6 1.9-6.5 1.9-2.7 4.2-5 7-6.8 4.2-2.9 7.9-4.3 11.1-4.3 3.2 0 6.2 1.5 9 4.6l-9 7.1c-1.8-2.3-5.2-2.8-7.5-1l-.3.3c-1 .6-1.7 1.5-2.1 2.6-.3.8-.1 1.7.4 2.4.4.5 1 .9 1.7.9.8.1 2.2-.3 4.2-1.2 5-2.1 8.8-3.3 11.4-3.7 2.2-.4 4.5-.2 6.6.7 1.9.8 3.5 2.2 4.6 3.9 1.4 2 2.2 4.4 2.3 6.9.1 2.6-.6 5.1-2 7.3-1.8 2.7-4.1 5-6.8 6.8-5.5 3.8-10 5.4-13.6 4.8-3.9-.6-7.1-2.6-9.4-5.5z"/></g></g></g></svg>\n</a></li>\n                <li>© 2022</li>\n              </ul>\n              <ul class="d-flex justify-content-between align-items-center github-links__inner">\n                <li><a href="https://github.com/l1irik-rbk">l1irik-rbk<span>${ft}</span></a></li>\n                <li><a href="https://github.com/kchrgn">kchrgn<span>${ft}</span></a></li>\n                <li><a href="https://github.com/KusakinVova">KusakinVova<span>${ft}</span></a></li>\n              </ul>\n            </div>\n          </div>\n        `,kt=async()=>{},At=()=>{const t=(location.hash.slice(1).toLowerCase()||"/").split("/"),n={resource:null};return n.resource=t[1],n},$t={"/":a,"/textbook":{render:async()=>{var n;return`\n            <section class="section textbook-section">\n              <h1>Учебник</h1>\n              <div class="d-flex justify-content-between navigation-btns">\n                <div id="btn_container" class="btn-container gap-2 d-md-block">\n                  ${n=i.textbookGroup,Object.values(t).map(((t,e)=>((t,n,e)=>{const s=n===e?"active":"";return 6===n||$.isAuthenticated?$.isAuthenticated?`<button id="${n}" type="button" class="btn btn-outline-primary ${s}">${t}</button>`:"":`<button id="${n}" type="button" class="btn btn-outline-primary ${s}">${t}</button>`})(t,e,n))).join("\n")}\n                </div>\n                <nav id="nav_container" aria-label="Page navigation example">\n                  <ul class="pagination justify-content-center">\n                    <li class="page-item">\n                      <button type="button" class="btn prev-btn rounded-0 page-link" disabled><span aria-hidden="true">&laquo;</span></button>\n                    </li>\n                    <li class="page-item">\n                      <button type="button" class="btn page-btn rounded-0 page-link" disabled>\n                        ${i.textbookPage+1}\n                      </button>\n                    </li>\n                    <li class="page-item">\n                      <button type="button" class="btn next-btn rounded-0 page-link"><span aria-hidden="true">&raquo;</span></button>\n                    </li>\n                  </ul>\n                </nav>\n              </div>\n              <div id="words_container" class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">\n                ${await ht(i.textbookGroup,i.textbookPage)}\n              </div>\n            </section>\n            \n          `},after_render:async()=>{i.startedFromBook=!0;const t=document.getElementById("btn_container"),n=document.getElementById("words_container"),e=document.querySelector(".prev-btn"),s=document.querySelector(".next-btn"),o=document.querySelector(".page-btn");$.isAuthenticated&&(await J(),await j(),await gt()),yt(s,e),pt(),t.addEventListener("click",(a=>{(async(t,n,e)=>{Array.from(n.children).forEach((t=>t.classList.remove("active")));const s=t.target;s.classList.add("active");const o=Number(s.id);i.textbookGroup=o,i.textbookPage=0,e.innerHTML=await ht(o,i.textbookPage),pt(),mt(),$.isAuthenticated&&(await J(),await j(),await gt())})(a,t,n),((t,n,e)=>{n.disabled=!0,t.disabled=!1,e.innerHTML="1",6===i.textbookGroup?t.disabled=!0:t.disabled=!1})(s,e,o)})),e.addEventListener("click",(()=>{(async(t,n)=>{i.textbookPage--,t.innerHTML=await ht(i.textbookGroup,i.textbookPage),n.innerHTML=`${i.textbookPage+1}`,pt(),mt(),$.isAuthenticated&&(await J(),await j(),await gt())})(n,o),yt(s,e)})),s.addEventListener("click",(()=>{(async(t,n)=>{i.textbookPage++,t.innerHTML=await ht(i.textbookGroup,i.textbookPage),n.innerHTML=`${i.textbookPage+1}`,pt(),mt(),$.isAuthenticated&&(await J(),await j(),await gt())})(n,o),yt(s,e)}))}},"/audiocall":st,"/sprint":{render:async()=>'\n            <section class="section" id="container">\n            </section>\n          ',after_render:async()=>{const t=document.getElementById("container");t&&(new lt(t,i.startedFromBook,i.textbookGroup,i.textbookPage),i.startedFromBook=!1)}},"/stats":{render:async()=>'\n            <section class="section" id="stats-container">\n            </section>\n          ',after_render:async()=>{const t=document.getElementById("stats-container");i.startedFromBook=!1,t&&($.isAuthenticated?(async t=>{const n=await k($);if(console.log("getUserStatistic",n),S(t,"h1","Краткосрочная статистика"),n.message)return void S(t,"div",n.message,"alert","alert-warning");const e=S(t,"div","","card","mb-3"),s=S(e,"div","","card-body");S(s,"h5",'Мини игра "Спринт"',"card-title");const o=n.optional.sprintShortStat;S(s,"p",`Новых слов за день: ${o.newWords}`,"card-text");const i=o.rightWords+o.wrongWords;let a=Math.round(100*o.rightWords/i);a||(a=0),S(s,"p",`Верные ответы: ${a}%`,"card-text"),S(s,"p",`Серия верных ответов: ${o.longestSeries}`,"card-text");const r=S(t,"div","","card","mb-3"),c=S(r,"div","","card-body");S(c,"h5",'Мини игра "Аудиовызов"',"card-title");const l=n.optional.audioCallShortStat;S(c,"p",`Новых слов за день: ${l.newWords}`,"card-text");const d=l.rightWords+l.wrongWords;let h=Math.round(100*l.rightWords/d);h||(h=0),S(c,"p",`Верные ответы: ${h}%`,"card-text"),S(c,"p",`Серия верных ответов: ${l.longestSeries}`,"card-text");const u=S(t,"div","","card","mb-3"),p=S(u,"div","","card-body");S(p,"h5","Слова по всем играм","card-title");const w=n.optional.wordShortStat;S(p,"p",`Новых слов за день: ${w.newWords}`,"card-text");const m=o.rightWords+l.rightWords,g=i+d;let b=Math.round(100*m/g);b||(b=0),S(p,"p",`Верные ответы: ${b}%`,"card-text"),S(p,"p",`Изучено слов: ${w.learnedWords}`,"card-text")})(t):(S(t,"h3","Краткосрочная статистика"),S(t,"div","Для просмотра данного раздела необходима авторизация","alert","alert-danger"),S(t,"a","Sign In","link-primary","d-flex","mt-3","mb-5").href="#/login"))}},"/register":m,"/login":L,"/team":{render:async()=>`\n            <section class="section team">\n              <h1>Наша команда</h1>\n              <div class="row row-cols-1 row-cols-md-3 g-4">\n                <div class="col">\n                  <div class="card shadow-sm h-100">\n                    <img src="./assets/users-8.svg" alt="member">\n                    <div class="card-body">\n                      <h4 class="card-title">Кирилл</h5>\n                      <a href="https://github.com/l1irik-rbk">l1irik-rbk<span>${ft}</span></a>\n                      <small class="text-muted">Разработчик</small>\n                      <ol>\n                        <li>Главная страница приложения</li>\n                        <li>Электронный учебник</li>\n                        <li>Список слов</li>\n                        <li>Прогресс изучения</li>\n                        <li>Изученные слова</li>\n                      </ol>\n                    </div>\n                  </div>\n                </div>\n                <div class="col">\n                  <div class="card shadow-sm h-100">\n                    <img src="./assets/users-1.svg" alt="member">        \n                    <div class="card-body">\n                      <h4 class="card-title">Андрей</h5>\n                      <a href="https://github.com/kchrgn">kchrgn<span>${ft}</span></a>\n                      <small class="text-muted">Разработчик</small>\n                      <ol>\n                        <li>Авторизация</li>\n                        <li>Мини-игра "Аудиовызов"</li>\n                        <li>Страница статистики</li>\n                      </ol>\n                    </div>\n                  </div>\n                </div>\n                <div class="col">\n                  <div class="card shadow-sm h-100">\n                    <img src="./assets/users-15.svg" alt="member">\n                    <div class="card-body">\n                      <h4 class="card-title">Владимир</h5>\n                      <a href="https://github.com/KusakinVova">KusakinVova<span>${ft}</span></a>\n                      <small class="text-muted">Разработчик</small>\n                      <ol>\n                        <li>Мини-игра "Спринт"</li>\n                        <li>Развертка базы данных и деплой бекенда</li>\n                        <li>Настройка SASS</li>\n                      </ol>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </section>\n        `,after_render:async()=>{i.startedFromBook=!1}}},Lt={previousRoute:""},St=async()=>{const t=document.getElementById("header_container"),n=document.getElementById("page_container"),e=document.getElementById("footer_container");t&&e&&(t.innerHTML=await v(),await y(),e.innerHTML=await xt(),await kt());const s=At(),o=s.resource?"/"+s.resource:"/",i=$t[o]?$t[o]:r;"/register"!=o&&"/login"!=o&&(Lt.previousRoute=o),!e||"/sprint"!==o&&"/audiocall"!==o||(e.innerHTML=""),n&&(n.innerHTML=await i.render(),await i.after_render())};window.addEventListener("beforeunload",(()=>{localStorage.setItem("textbookPage",JSON.stringify(i.textbookPage)),localStorage.setItem("textbookGroup",JSON.stringify(6===i.textbookGroup?i.textbookGroup=0:i.textbookGroup))})),window.addEventListener("load",(()=>{localStorage.getItem("textbookPage")&&(i.textbookPage=JSON.parse(localStorage.getItem("textbookPage")||"")),localStorage.getItem("textbookGroup")&&(i.textbookGroup=JSON.parse(localStorage.getItem("textbookGroup")||""))})),window.addEventListener("hashchange",St),window.addEventListener("load",St)})();